import{d as u,_ as O,aw as I,j as e,ax as E,b as m,h as A,k as V,ay as Q,az as L,aA as B,aB as w,aC as $,aD as G,aE as U,aF as K,av as H,aG as W,aH as J,aI as X,aJ as Y,aK as Z,aL as ee,aM as te,aN as oe,s as z,aO as se,i as ae,aP as re,aQ as N,aR as le,y as ne,aS as ie,B as R,S as ce,x as M,A as q,C as de,P as ue,R as pe}from"./index-B4jAaOIo.js";import{P as be}from"./PageHeader-DztDYYWF.js";import{u as xe,s as fe}from"./ContextProvider-8-ENsgXB.js";const he=["className","children"],me=a=>{const{classes:t}=a;return V({root:["toolbarContainer"]},Q,t)},ge=E("div",{name:"MuiDataGrid",slot:"ToolbarContainer",overridesResolver:(a,t)=>t.toolbarContainer})(({theme:a})=>({display:"flex",alignItems:"center",flexWrap:"wrap",gap:a.spacing(1),padding:a.spacing(.5,.5,0)})),Ce=u.forwardRef(function(t,l){const{className:d,children:r}=t,b=O(t,he),o=I(),s=me(o);return r?e.jsx(ge,m({ref:l,className:A(d,s.root),ownerState:o},b,{children:r})):null}),ye=u.forwardRef(function(t,l){var f,j;const{slotProps:d={}}=t,r=d.button||{},b=d.tooltip||{},o=L(),s=L(),i=B(),n=I(),p=w(i,$),h=k=>{var T;p.open&&p.openedPanelValue===G.columns?i.current.hidePreferences():i.current.showPreferences(G.columns,s,o),(T=r.onClick)==null||T.call(r,k)};if(n.disableColumnSelector)return null;const x=p.open&&p.panelId===s;return e.jsx(n.slots.baseTooltip,m({title:i.current.getLocaleText("toolbarColumnsLabel"),enterDelay:1e3},b,(f=n.slotProps)==null?void 0:f.baseTooltip,{children:e.jsx(n.slots.baseButton,m({ref:l,id:o,size:"small","aria-label":i.current.getLocaleText("toolbarColumnsLabel"),"aria-haspopup":"menu","aria-expanded":x,"aria-controls":x?s:void 0,startIcon:e.jsx(n.slots.columnSelectorIcon,{})},r,{onClick:h},(j=n.slotProps)==null?void 0:j.baseButton,{children:i.current.getLocaleText("toolbarColumns")}))}))}),Fe=u.forwardRef(function(t,l){var C,v;const{slotProps:d={}}=t,r=d.button||{},b=d.tooltip||{},o=B(),s=I(),i=w(o,U),n=L(),p=L(),[h,x]=u.useState(!1),f=u.useRef(null),j=K(l,f),k=[{icon:e.jsx(s.slots.densityCompactIcon,{}),label:o.current.getLocaleText("toolbarDensityCompact"),value:"compact"},{icon:e.jsx(s.slots.densityStandardIcon,{}),label:o.current.getLocaleText("toolbarDensityStandard"),value:"standard"},{icon:e.jsx(s.slots.densityComfortableIcon,{}),label:o.current.getLocaleText("toolbarDensityComfortable"),value:"comfortable"}],T=u.useMemo(()=>{switch(i){case"compact":return e.jsx(s.slots.densityCompactIcon,{});case"comfortable":return e.jsx(s.slots.densityComfortableIcon,{});default:return e.jsx(s.slots.densityStandardIcon,{})}},[i,s]),S=y=>{var D;x(_=>!_),(D=r.onClick)==null||D.call(r,y)},P=()=>{x(!1)},g=y=>{o.current.setDensity(y),x(!1)},F=y=>{Z(y.key)&&y.preventDefault(),ee(y.key)&&x(!1)};if(s.disableDensitySelector)return null;const c=k.map((y,D)=>e.jsxs(H,{onClick:()=>g(y.value),selected:y.value===i,children:[e.jsx(W,{children:y.icon}),y.label]},D));return e.jsxs(u.Fragment,{children:[e.jsx(s.slots.baseTooltip,m({title:o.current.getLocaleText("toolbarDensityLabel"),enterDelay:1e3},b,(C=s.slotProps)==null?void 0:C.baseTooltip,{children:e.jsx(s.slots.baseButton,m({ref:j,size:"small",startIcon:T,"aria-label":o.current.getLocaleText("toolbarDensityLabel"),"aria-haspopup":"menu","aria-expanded":h,"aria-controls":h?p:void 0,id:n},r,{onClick:S},(v=s.slotProps)==null?void 0:v.baseButton,{children:o.current.getLocaleText("toolbarDensity")}))})),e.jsx(J,{open:h,target:f.current,onClose:P,position:"bottom-start",children:e.jsx(X,{id:p,className:Y.menuList,"aria-labelledby":n,onKeyDown:F,autoFocusItem:h,children:c})})]})}),je=a=>{const{classes:t}=a;return V({root:["toolbarFilterList"]},Q,t)},Te=z("ul",{name:"MuiDataGrid",slot:"ToolbarFilterList",overridesResolver:(a,t)=>t.toolbarFilterList})(({theme:a})=>({margin:a.spacing(1,1,.5),padding:a.spacing(0,1)})),ke=u.forwardRef(function(t,l){var S,P;const{slotProps:d={}}=t,r=d.button||{},b=d.tooltip||{},o=B(),s=I(),i=w(o,te),n=w(o,oe),p=w(o,$),h=je(s),x=L(),f=L(),j=u.useMemo(()=>{if(p.open)return o.current.getLocaleText("toolbarFiltersTooltipHide");if(i.length===0)return o.current.getLocaleText("toolbarFiltersTooltipShow");const g=c=>n[c.field].filterOperators.find(C=>C.value===c.operator).label||o.current.getLocaleText(`filterOperator${ae(c.operator)}`).toString(),F=c=>{const{getValueAsString:C}=n[c.field].filterOperators.find(v=>v.value===c.operator);return C?C(c.value):c.value};return e.jsxs("div",{children:[o.current.getLocaleText("toolbarFiltersTooltipActive")(i.length),e.jsx(Te,{className:h.root,ownerState:s,children:i.map((c,C)=>m({},n[c.field]&&e.jsx("li",{children:`${n[c.field].headerName||c.field}
                  ${g(c)}
                  ${c.value!=null?F(c):""}`},C)))})]})},[o,s,p.open,i,n,h]),k=g=>{var C;const{open:F,openedPanelValue:c}=p;F&&c===G.filters?o.current.hidePreferences():o.current.showPreferences(G.filters,f,x),(C=r.onClick)==null||C.call(r,g)};if(s.disableColumnFilter)return null;const T=p.open&&p.panelId===f;return e.jsx(s.slots.baseTooltip,m({title:j,enterDelay:1e3},b,(S=s.slotProps)==null?void 0:S.baseTooltip,{children:e.jsx(s.slots.baseButton,m({ref:l,id:x,size:"small","aria-label":o.current.getLocaleText("toolbarFiltersLabel"),"aria-controls":T?f:void 0,"aria-expanded":T,"aria-haspopup":!0,startIcon:e.jsx(se,{badgeContent:i.length,color:"primary",children:e.jsx(s.slots.openFilterButtonIcon,{})})},r,{onClick:k},(P=s.slotProps)==null?void 0:P.baseButton,{children:o.current.getLocaleText("toolbarFilters")}))}))}),Se=["quickFilterParser","quickFilterFormatter","debounceMs","className"],Pe=a=>{const{classes:t}=a;return V({root:["toolbarQuickFilter"]},Q,t)},we=z(ne,{name:"MuiDataGrid",slot:"ToolbarQuickFilter",overridesResolver:(a,t)=>t.toolbarQuickFilter})(({theme:a})=>({width:"auto",paddingBottom:a.spacing(.5),"& input":{marginLeft:a.spacing(.5)},"& .MuiInput-underline:before":{borderBottom:`1px solid ${(a.vars||a).palette.divider}`},'& input[type="search"]::-webkit-search-decoration,\n  & input[type="search"]::-webkit-search-cancel-button,\n  & input[type="search"]::-webkit-search-results-button,\n  & input[type="search"]::-webkit-search-results-decoration':{display:"none"}})),Le=a=>a.split(" ").filter(t=>t!==""),Ie=a=>a.join(" ");function ve(a){var S,P;const t=B(),l=I(),d=Pe(l),r=w(t,re),{quickFilterParser:b=Le,quickFilterFormatter:o=Ie,debounceMs:s=l.filterDebounceMs,className:i}=a,n=O(a,Se),[p,h]=u.useState(()=>o(r??[])),x=u.useRef(r);u.useEffect(()=>{N(x.current,r)||(x.current=r,h(g=>N(b(g),r)?g:o(r??[])))},[r,o,b]);const f=u.useCallback(g=>{const F=b(g);x.current=F,t.current.setQuickFilterValues(F)},[t,b]),j=u.useMemo(()=>le(f,s),[f,s]),k=u.useCallback(g=>{const F=g.target.value;h(F),j(F)},[j]),T=u.useCallback(()=>{h(""),f("")},[f]);return e.jsx(we,m({as:l.slots.baseTextField,ownerState:l,variant:"standard",value:p,onChange:k,className:A(i,d.root),placeholder:t.current.getLocaleText("toolbarQuickFilterPlaceholder"),"aria-label":t.current.getLocaleText("toolbarQuickFilterLabel"),type:"search"},n,{InputProps:m({startAdornment:e.jsx(l.slots.quickFilterIcon,{fontSize:"small"}),endAdornment:e.jsx(l.slots.baseIconButton,m({"aria-label":t.current.getLocaleText("toolbarQuickFilterDeleteIconLabel"),size:"small",sx:{visibility:p?"visible":"hidden"},onClick:T},(S=l.slotProps)==null?void 0:S.baseIconButton,{children:e.jsx(l.slots.quickFilterClearIcon,{fontSize:"small"})}))},n.InputProps)},(P=l.slotProps)==null?void 0:P.baseTextField))}const De=["className","csvOptions","printOptions","excelOptions","showQuickFilter","quickFilterProps"],Re=u.forwardRef(function(t,l){const{csvOptions:d,printOptions:r,excelOptions:b,showQuickFilter:o=!1,quickFilterProps:s={}}=t,i=O(t,De),n=I();return n.disableColumnFilter&&n.disableColumnSelector&&n.disableDensitySelector&&!o?null:e.jsxs(Ce,m({ref:l},i,{children:[e.jsx(ye,{}),e.jsx(ke,{}),e.jsx(Fe,{}),e.jsx(ie,{csvOptions:d,printOptions:r,excelOptions:b}),e.jsx(R,{sx:{flex:1}}),o&&e.jsx(ve,m({},s))]}))}),Oe=function(){const{state:t,dispatch:l}=xe();return e.jsxs(R,{children:[e.jsx(be,{pageTitle:"Compare Data App",description:"Description of this app section",actions:e.jsxs(ce,{direction:"row",children:[e.jsxs(R,{children:[t.selectedRows.length<2&&e.jsx(M,{variant:"outlined",disabled:!0,"data-testid":"cpd-compare-button",children:"Compare scenarios"}),t.selectedRows.length>1&&e.jsx(q,{to:"/compare-data/compare",children:e.jsxs(M,{variant:"contained","data-testid":"cpd-compare-button",children:["Compare scenarios (",t.selectedRows.length,")"]})})]}),e.jsx(R,{children:e.jsx(q,{to:"/compare-data/new",children:e.jsx(M,{variant:"contained","data-testid":"cpd-new-button",children:"New scenario"})})})]}),sx:{padding:3,backgroundColor:"white"}}),e.jsx(de,{maxWidth:"xl",sx:{paddingTop:3,paddingBottom:3},children:e.jsx(ue,{children:e.jsx(pe,{rows:t.data,getRowId:d=>d[t.dataIdField],columns:t.columns,checkboxSelection:!0,rowSelectionModel:t.selectedRows,onRowSelectionModelChange:d=>l(fe(d)),disableRowSelectionOnClick:!0,disableDensitySelector:!0,disableColumnFilter:!0,initialState:{pagination:{paginationModel:{page:1,pageSize:25}}},slots:{toolbar:Re},slotProps:{toolbar:{showQuickFilter:!0}},sx:{"& .MuiDataGrid-toolbarContainer":{padding:2,paddingBottom:0}}})})})]})};export{Oe as component};
