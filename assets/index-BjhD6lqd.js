import{d as u,_ as O,j as e,aq as E,b as h,h as $,k as V,ar as L,as as U,at as K,s as A,i as H,O as W,w as J,B as R,S as X,v as M,A as N,C as Y,P as Z}from"./index-BlWuX08Q.js";import{P as ee}from"./PageHeader-BBRmM4us.js";import{S as te}from"./SciDataGrid-B-GATIlO.js";import{u as oe,s as se}from"./ContextProvider-fH5TAPI-.js";import{g as Q,u as B,b as w,c as z,G,d as re,e as ae,f as le,i as ne,h as ie,j as ce,k as de,B as ue,l as pe,m as q,n as be}from"./DataGrid-4SV2oeVK.js";import{u as I,L as xe}from"./useGridRootProps-CTvEWSYH.js";import{M as fe}from"./MenuItem-D_sd6J3P.js";import"./FilterField-CN1gz-Lq.js";import"./DatePicker-ury17p9H.js";import"./DateCalendar-BLh0diOJ.js";import"./colorManipulator-Cn7TYfDH.js";const me=["className","children"],he=r=>{const{classes:t}=r;return V({root:["toolbarContainer"]},Q,t)},ge=E("div",{name:"MuiDataGrid",slot:"ToolbarContainer",overridesResolver:(r,t)=>t.toolbarContainer})(({theme:r})=>({display:"flex",alignItems:"center",flexWrap:"wrap",gap:r.spacing(1),padding:r.spacing(.5,.5,0)})),Ce=u.forwardRef(function(t,l){const{className:d,children:a}=t,b=O(t,me),o=I(),s=he(o);return a?e.jsx(ge,h({ref:l,className:$(d,s.root),ownerState:o},b,{children:a})):null}),je=u.forwardRef(function(t,l){var f,y;const{slotProps:d={}}=t,a=d.button||{},b=d.tooltip||{},o=L(),s=L(),i=B(),n=I(),p=w(i,z),m=T=>{var k;p.open&&p.openedPanelValue===G.columns?i.current.hidePreferences():i.current.showPreferences(G.columns,s,o),(k=a.onClick)==null||k.call(a,T)};if(n.disableColumnSelector)return null;const x=p.open&&p.panelId===s;return e.jsx(n.slots.baseTooltip,h({title:i.current.getLocaleText("toolbarColumnsLabel"),enterDelay:1e3},b,(f=n.slotProps)==null?void 0:f.baseTooltip,{children:e.jsx(n.slots.baseButton,h({ref:l,id:o,size:"small","aria-label":i.current.getLocaleText("toolbarColumnsLabel"),"aria-haspopup":"menu","aria-expanded":x,"aria-controls":x?s:void 0,startIcon:e.jsx(n.slots.columnSelectorIcon,{})},a,{onClick:m},(y=n.slotProps)==null?void 0:y.baseButton,{children:i.current.getLocaleText("toolbarColumns")}))}))}),Fe=u.forwardRef(function(t,l){var C,v;const{slotProps:d={}}=t,a=d.button||{},b=d.tooltip||{},o=B(),s=I(),i=w(o,re),n=L(),p=L(),[m,x]=u.useState(!1),f=u.useRef(null),y=U(l,f),T=[{icon:e.jsx(s.slots.densityCompactIcon,{}),label:o.current.getLocaleText("toolbarDensityCompact"),value:"compact"},{icon:e.jsx(s.slots.densityStandardIcon,{}),label:o.current.getLocaleText("toolbarDensityStandard"),value:"standard"},{icon:e.jsx(s.slots.densityComfortableIcon,{}),label:o.current.getLocaleText("toolbarDensityComfortable"),value:"comfortable"}],k=u.useMemo(()=>{switch(i){case"compact":return e.jsx(s.slots.densityCompactIcon,{});case"comfortable":return e.jsx(s.slots.densityComfortableIcon,{});default:return e.jsx(s.slots.densityStandardIcon,{})}},[i,s]),S=j=>{var D;x(_=>!_),(D=a.onClick)==null||D.call(a,j)},P=()=>{x(!1)},g=j=>{o.current.setDensity(j),x(!1)},F=j=>{ne(j.key)&&j.preventDefault(),ie(j.key)&&x(!1)};if(s.disableDensitySelector)return null;const c=T.map((j,D)=>e.jsxs(fe,{onClick:()=>g(j.value),selected:j.value===i,children:[e.jsx(xe,{children:j.icon}),j.label]},D));return e.jsxs(u.Fragment,{children:[e.jsx(s.slots.baseTooltip,h({title:o.current.getLocaleText("toolbarDensityLabel"),enterDelay:1e3},b,(C=s.slotProps)==null?void 0:C.baseTooltip,{children:e.jsx(s.slots.baseButton,h({ref:y,size:"small",startIcon:k,"aria-label":o.current.getLocaleText("toolbarDensityLabel"),"aria-haspopup":"menu","aria-expanded":m,"aria-controls":m?p:void 0,id:n},a,{onClick:S},(v=s.slotProps)==null?void 0:v.baseButton,{children:o.current.getLocaleText("toolbarDensity")}))})),e.jsx(ae,{open:m,target:f.current,onClose:P,position:"bottom-start",children:e.jsx(K,{id:p,className:le.menuList,"aria-labelledby":n,onKeyDown:F,autoFocusItem:m,children:c})})]})}),ye=r=>{const{classes:t}=r;return V({root:["toolbarFilterList"]},Q,t)},ke=A("ul",{name:"MuiDataGrid",slot:"ToolbarFilterList",overridesResolver:(r,t)=>t.toolbarFilterList})(({theme:r})=>({margin:r.spacing(1,1,.5),padding:r.spacing(0,1)})),Te=u.forwardRef(function(t,l){var S,P;const{slotProps:d={}}=t,a=d.button||{},b=d.tooltip||{},o=B(),s=I(),i=w(o,ce),n=w(o,de),p=w(o,z),m=ye(s),x=L(),f=L(),y=u.useMemo(()=>{if(p.open)return o.current.getLocaleText("toolbarFiltersTooltipHide");if(i.length===0)return o.current.getLocaleText("toolbarFiltersTooltipShow");const g=c=>n[c.field].filterOperators.find(C=>C.value===c.operator).label||o.current.getLocaleText(`filterOperator${H(c.operator)}`).toString(),F=c=>{const{getValueAsString:C}=n[c.field].filterOperators.find(v=>v.value===c.operator);return C?C(c.value):c.value};return e.jsxs("div",{children:[o.current.getLocaleText("toolbarFiltersTooltipActive")(i.length),e.jsx(ke,{className:m.root,ownerState:s,children:i.map((c,C)=>h({},n[c.field]&&e.jsx("li",{children:`${n[c.field].headerName||c.field}
                  ${g(c)}
                  ${c.value!=null?F(c):""}`},C)))})]})},[o,s,p.open,i,n,m]),T=g=>{var C;const{open:F,openedPanelValue:c}=p;F&&c===G.filters?o.current.hidePreferences():o.current.showPreferences(G.filters,f,x),(C=a.onClick)==null||C.call(a,g)};if(s.disableColumnFilter)return null;const k=p.open&&p.panelId===f;return e.jsx(s.slots.baseTooltip,h({title:y,enterDelay:1e3},b,(S=s.slotProps)==null?void 0:S.baseTooltip,{children:e.jsx(s.slots.baseButton,h({ref:l,id:x,size:"small","aria-label":o.current.getLocaleText("toolbarFiltersLabel"),"aria-controls":k?f:void 0,"aria-expanded":k,"aria-haspopup":!0,startIcon:e.jsx(ue,{badgeContent:i.length,color:"primary",children:e.jsx(s.slots.openFilterButtonIcon,{})})},a,{onClick:T},(P=s.slotProps)==null?void 0:P.baseButton,{children:o.current.getLocaleText("toolbarFilters")}))}))}),Se=["quickFilterParser","quickFilterFormatter","debounceMs","className"],Pe=r=>{const{classes:t}=r;return V({root:["toolbarQuickFilter"]},Q,t)},we=A(J,{name:"MuiDataGrid",slot:"ToolbarQuickFilter",overridesResolver:(r,t)=>t.toolbarQuickFilter})(({theme:r})=>({width:"auto",paddingBottom:r.spacing(.5),"& input":{marginLeft:r.spacing(.5)},"& .MuiInput-underline:before":{borderBottom:`1px solid ${(r.vars||r).palette.divider}`},'& input[type="search"]::-webkit-search-decoration,\n  & input[type="search"]::-webkit-search-cancel-button,\n  & input[type="search"]::-webkit-search-results-button,\n  & input[type="search"]::-webkit-search-results-decoration':{display:"none"}})),Le=r=>r.split(" ").filter(t=>t!==""),Ie=r=>r.join(" ");function ve(r){var S,P;const t=B(),l=I(),d=Pe(l),a=w(t,pe),{quickFilterParser:b=Le,quickFilterFormatter:o=Ie,debounceMs:s=l.filterDebounceMs,className:i}=r,n=O(r,Se),[p,m]=u.useState(()=>o(a??[])),x=u.useRef(a);u.useEffect(()=>{q(x.current,a)||(x.current=a,m(g=>q(b(g),a)?g:o(a??[])))},[a,o,b]);const f=u.useCallback(g=>{const F=b(g);x.current=F,t.current.setQuickFilterValues(F)},[t,b]),y=u.useMemo(()=>W(f,s),[f,s]),T=u.useCallback(g=>{const F=g.target.value;m(F),y(F)},[y]),k=u.useCallback(()=>{m(""),f("")},[f]);return e.jsx(we,h({as:l.slots.baseTextField,ownerState:l,variant:"standard",value:p,onChange:T,className:$(i,d.root),placeholder:t.current.getLocaleText("toolbarQuickFilterPlaceholder"),"aria-label":t.current.getLocaleText("toolbarQuickFilterLabel"),type:"search"},n,{InputProps:h({startAdornment:e.jsx(l.slots.quickFilterIcon,{fontSize:"small"}),endAdornment:e.jsx(l.slots.baseIconButton,h({"aria-label":t.current.getLocaleText("toolbarQuickFilterDeleteIconLabel"),size:"small",sx:{visibility:p?"visible":"hidden"},onClick:k},(S=l.slotProps)==null?void 0:S.baseIconButton,{children:e.jsx(l.slots.quickFilterClearIcon,{fontSize:"small"})}))},n.InputProps)},(P=l.slotProps)==null?void 0:P.baseTextField))}const De=["className","csvOptions","printOptions","excelOptions","showQuickFilter","quickFilterProps"],Re=u.forwardRef(function(t,l){const{csvOptions:d,printOptions:a,excelOptions:b,showQuickFilter:o=!1,quickFilterProps:s={}}=t,i=O(t,De),n=I();return n.disableColumnFilter&&n.disableColumnSelector&&n.disableDensitySelector&&!o?null:e.jsxs(Ce,h({ref:l},i,{children:[e.jsx(je,{}),e.jsx(Te,{}),e.jsx(Fe,{}),e.jsx(be,{csvOptions:d,printOptions:a,excelOptions:b}),e.jsx(R,{sx:{flex:1}}),o&&e.jsx(ve,h({},s))]}))}),_e=function(){const{state:t,dispatch:l}=oe();return e.jsxs(R,{children:[e.jsx(ee,{pageTitle:"Compare Data App",description:"Description of this app section",actions:e.jsxs(X,{direction:"row",children:[e.jsxs(R,{children:[t.selectedRows.length<2&&e.jsx(M,{variant:"outlined",disabled:!0,"data-testid":"cpd-compare-button",children:"Compare scenarios"}),t.selectedRows.length>1&&e.jsx(N,{to:"/compare-data/compare",children:e.jsxs(M,{variant:"contained","data-testid":"cpd-compare-button",children:["Compare scenarios (",t.selectedRows.length,")"]})})]}),e.jsx(R,{children:e.jsx(N,{to:"/compare-data/new",children:e.jsx(M,{variant:"contained","data-testid":"cpd-new-button",children:"New scenario"})})})]}),sx:{padding:3,backgroundColor:"white"}}),e.jsx(Y,{maxWidth:"xl",sx:{paddingTop:3,paddingBottom:3},children:e.jsx(Z,{children:e.jsx(te,{rows:t.data,getRowId:d=>d[t.dataIdField],columns:t.columns,checkboxSelection:!0,rowSelectionModel:t.selectedRows,onRowSelectionModelChange:d=>l(se(d)),disableRowSelectionOnClick:!0,disableDensitySelector:!0,disableColumnFilter:!0,initialState:{pagination:{paginationModel:{page:1,pageSize:25}}},slots:{toolbar:Re},slotProps:{toolbar:{showQuickFilter:!0}},sx:{"& .MuiDataGrid-toolbarContainer":{padding:2,paddingBottom:0}}})})})]})};export{_e as component};
